# Before vs After 백테스트 비교 분석

- 분석일: 2026-02-28
- Before: `WUBU_백테스트_결과_2023-2025_Before.md` (2026-02-26 실행)
- After: `WUBU_백테스트_결과_2016-2025_After.md` (2026-02-27 실행)

---

## 1. 테스트 환경 차이

| 항목 | Before (2/26) | After (2/27) |
|------|---------------|--------------|
| **기간** | 3년 (2023~2025) | 10년 (2016~2025) |
| **전략 수** | 5개 (단순 팩터) | 6개 (다중 오버레이) |
| **검증 방법** | 단순 In-Sample | In-Sample + Walk-Forward OOS |

기간과 방법론이 다르므로 직접 1:1 비교는 제한적이지만, 전략 철학의 진화 관점에서 분석한다.

---

## 2. 전략 구성의 발전

### Before — 개별 팩터 단순 결합

- 최고 전략: MultiFactor(V+M) — Sharpe 0.48, CAGR 11.21%
- 모멘텀 단독은 아예 작동 실패 (상장기간 필터 로직 문제)
- 마켓타이밍이 오히려 역효과 (2025 상승장 진입 지연)

### After — 체계적 팩터 조합 + 다중 오버레이 레이어

- 3팩터(V/M/Q) 기반 → 4팩터(+LowVol) → 오버레이(MT/Drawdown/VolTarget/Regime)
- 각 모듈을 점진적으로 쌓으며 효과를 측정하는 구조

**평가**: 전략 아키텍처가 크게 성숙. "되는 거 하나 찾기" → "모듈별 효과 분리 검증"으로 개선.

---

## 3. 핵심 지표 비교

Before의 MultiFactor+MT (3년)와 After의 유사 전략을 비교:

| 지표 | Before: MF+MT (3년 IS) | After: 3F+MT (10년 IS) | After: 3F+MT (OOS) |
|------|------------------------|------------------------|---------------------|
| CAGR | 4.10% | 6.01% | 3.09% |
| Sharpe | 0.14 | 0.26 | 0.09 |
| MDD | -26.88% | -37.32% | -37.48% |

- After에서 MT 전략의 In-Sample Sharpe가 0.14 → 0.26으로 거의 2배 개선
- 10년이라 더 다양한 시장 환경을 거쳤음에도 CAGR이 더 높음
- MDD는 10년 기간이라 더 깊은 낙폭(-37%)이 포함됨 (2018, 2020 하락장)

---

## 4. 가장 큰 개선점: Walk-Forward OOS 검증 도입

**Before**: In-Sample만 존재 → 과적합 여부를 판단할 수 없었음

**After**: Walk-Forward(학습 5년/검증 1년, 5윈도우)로 OOS 검증

- 과적합 정도를 수치로 확인 가능
- **Regime Model이 OOS에서 역전 현상 발견** (IS 1.57% → OOS 7.18%)
  - In-Sample만 봤으면 절대 발견할 수 없었던 인사이트

**평가**: 방법론적으로 가장 의미있는 진전. 실전 배포 전 신뢰도 평가가 가능해짐.

---

## 5. 발견된 문제점과 해결

| 문제 (Before) | 해결 (After) |
|---------------|-------------|
| Momentum 단독 작동 실패 | 3팩터/4팩터 결합으로 해결 |
| MT가 상승장에서 진입 지연 | Regime Model로 동적 가중치 조절 |
| 전략 효과 분리 불가 | 모듈별 Delta 테이블로 기여도 분석 |
| 과적합 검증 없음 | Walk-Forward OOS 도입 |

---

## 6. After에서 새롭게 발견된 문제

- **섹터 중립이 역효과**: OOS MDD -47.97%로 최악 (해결 필요)
- **Turnover buffer 과도**: holding_bonus 0.5가 부진 종목 고정 (튜닝 필요)
- **전략 5(Full)는 전반적으로 실패**: 섹터중립+턴오버버퍼 조합이 팩터 효과를 상쇄

---

## 7. 종합 평가

**After가 Before 대비 확실히 나아졌다.** 이유:

1. **방법론 성숙**: Walk-Forward OOS 검증으로 실전 신뢰도 확보
2. **전략 깊이**: 단순 2팩터 → 4팩터 + 다중 오버레이로 진화
3. **모듈화**: 각 모듈의 기여도(dSharpe, dCAGR, dMDD)를 정량적으로 분리
4. **OOS 최고 전략(Regime)**: Sharpe 0.28, CAGR 7.18%는 실전 적용 가능한 수준
5. **실패 전략 식별**: 섹터중립/턴오버버퍼의 역효과를 데이터로 확인 → 후속 개선 방향 명확

다만 Before의 MF(V+M)이 3년 기준 Sharpe 0.48, CAGR 11.21%를 보인 것은 해당 기간의 특수성(2025 상승장 수혜)일 가능성이 높고, After의 OOS 검증이 이런 기간 편향을 걸러내는 역할을 한다. **수치가 낮아 보여도 OOS 검증된 Sharpe 0.28이 IS-only Sharpe 0.48보다 실전에서 더 신뢰할 수 있다.**